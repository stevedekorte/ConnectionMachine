<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>client</title>

	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="./Fonts/Helvetica/fonts.css" rel="stylesheet" type="text/css">
	<link href="style.css" rel="stylesheet" type="text/css">
	<!--
	<script type="text/javascript" src="typing.js"></script>
	-->

	<style>
		
	</style>
</head>

<body style="margin: 5em;">
	<div id="content">
	</div>
</body>

<script>
	const content = document.getElementById("content")
	const ip = "127.0.0.1"
	const port = 13254

	//var socket = new WebSocket("ws://127.0.0.1:13254/socketserver", ["protocolOne", "protocolTwo"]);
	const url = "ws://" + ip + ":" + port + "/"
	var socket = new WebSocket(url);

	log("new WebSocket('" + url + "')")

	socket.onopen = function (event) {
		log("onopen()")
		socket.send("{ frame: \"xxx\" }");
	};

	socket.onmessage = function(event) {
		const message = event.data
		log("onmessage('" + message + "')")
	}

	socket.onerror = function(event) {
		log("onerror('" + event + "')")
	}

	socket.onclose = function(event) {
		log("onclose('" + event.reason + "')<br>")
	}

	function log(msg) {
		content.innerHTML += " " + msg + "<br>\n"
	}

	window.onkeydown= function(event) {
		const k = event.keyCode
		socket.send("{ keyCode: " + k + " }");
    }

	//socket.close();


</script>

</html>